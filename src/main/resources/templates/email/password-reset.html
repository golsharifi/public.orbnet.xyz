<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      th:dir="${#locale.language == 'ar' || #locale.language == 'fa' || #locale.language == 'he' ? 'rtl' : 'ltr'}"
      th:lang="${#locale.language}">
<head>
    <meta charset="UTF-8">
    <title th:text="#{email.password.reset.title}">OrbVPN: Password Reset Code</title>
    <style>
        /* Base styles */
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f5f5f5;
            color: #333333;
            line-height: 1.6;
        }

        /* Default LTR font */
        body,
        .email-container,
        .content-section,
        .reset-card,
        .warning-text,
        .action-button{
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif !important;
        }
        
        /* RTL font overrides */
        [dir="rtl"] body,
        [dir="rtl"] .email-container,
        [dir="rtl"] .content-section,
        [dir="rtl"] .reset-card,
        [dir="rtl"] .warning-text,
        [dir="rtl"] .action-button {
            text-align: right !important;
            direction: rtl !important;
            font-family: Tahoma, Arial, sans-serif !important;
        }

        /* Force visibility and display */
        .email-container,
        .content-section,
        .reset-card,
        .warning-text,
        .footer-content {
            display: block !important;
            visibility: visible !important;
            font-family: Tahoma, Arial, sans-serif !important;
        }

        /* Add table wrapper for better email client compatibility */
        .email-wrapper {
            width: 100% !important;
            table-layout: fixed !important;
            display: table !important;
        }

        /* Container */
        .email-container {
            max-width: 600px;
            margin: 0 auto;
            padding: 20px;
            background-color: #ffffff;
        }

        /* RTL/LTR text alignment */
        [dir="rtl"] {
            text-align: right;
            font-family: Tahoma, Arial, sans-serif;
        }

        [dir="ltr"] {
            text-align: left;
        }

        /* Primary heading */
        .primary-heading {
            color: #0052FF;
            font-size: 24px;
            margin-bottom: 16px;
            font-weight: 600;
        }

        /* Reset card */
        .reset-card {
            background-color: #f7f8fa;
            border-radius: 8px;
            padding: 24px;
            margin: 24px 0;
        }

        [dir="rtl"] .reset-card {
            border-right: 4px solid #0052FF;
            border-left: none;
        }

        [dir="ltr"] .reset-card {
            border-left: 4px solid #0052FF;
            border-right: none;
        }

        /* Token display */
        .token-display {
            background-color: #ffffff;
            border: 1px solid #e0e0e0;
            border-radius: 4px;
            padding: 16px;
            margin: 16px 0;
            font-size: 18px;
            font-weight: 500;
            text-align: center;
            letter-spacing: 2px;
        }

        /* Action button */
        .action-button {
            display: inline-block;
            background-color: #0052FF;
            color: #ffffff !important; /* Force white text color */
            padding: 16px 32px;
            border-radius: 4px;
            text-decoration: none;
            font-weight: 500;
            margin: 16px 0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif !important;
        }

        /* RTL Action button */
        [dir="rtl"] .action-button {
            font-family: Tahoma, Arial, sans-serif !important;
            color: #ffffff !important;
        }

        /* Warning sections */
        .warning-text {
            color: #666666;
            background-color: #fff8e1;
            padding: 16px;
            border-radius: 4px;
            margin: 16px 0;
        }

        .security-warning {
            border-left: 4px solid #ff9800;
        }

        [dir="rtl"] .security-warning {
            border-right: 4px solid #ff9800;
            border-left: none;
        }

        /* Links */
        .text-link {
            color: #0052FF;
            text-decoration: none;
        }

        .text-link:hover {
            text-decoration: underline;
        }

        /* Footer section */
        .footer-content {
            margin-top: 40px;
            padding-top: 20px;
            border-top: 1px solid #e0e0e0;
        }

        .footer-links {
            margin: 16px 0;
        }

        .footer-links a {
            color: #666666;
            text-decoration: none;
            margin-inline-end: 16px;
        }

        .company-info {
            font-size: 12px;
            color: #666666;
            margin-top: 16px;
        }

        .disclaimer {
            font-size: 11px;
            color: #999999;
            margin-top: 16px;
            line-height: 1.4;
        }
    </style>
</head>
<body>
<div class="email-container"          th:dir="${#locale.language == 'ar' || #locale.language == 'fa' || #locale.language == 'he' ? 'rtl' : 'ltr'}">

    <!-- Header -->
    <div th:replace="~{fragments/header :: header(${userName})}"></div>

    <!-- Main Content -->
    <div class="content-section">
        <h1 class="primary-heading" th:text="#{email.password.reset.title}">Reset Your Password</h1>

        <p th:text="#{email.password.reset.request}">
            We received a request to reset your password.
        </p>

        <!-- Reset Card -->
        <div class="reset-card">
            <div th:text="#{email.password.reset.link}">
                To reset your password, click the following link:
            </div>

            <a href="https://orbvpn.xyz/auth/forgot-password" class="action-button" th:text="#{email.reset.password}">
                Reset Password
            </a>

            <div th:text="#{email.password.reset.code}">
                Or use this verification code:
            </div>

            <div class="token-display">
                <strong th:text="${token}">TOKEN</strong>
            </div>
        </div>

        <!-- Warning Section -->
        <div class="warning-text">
            <p th:text="#{email.password.reset.ignore}">
                If you didn't request a password reset, you can safely ignore this email.
            </p>
        </div>

        <!-- Security Warning -->
        <div class="warning-text security-warning">
                <span th:text="#{email.password.reset.unauthorized.prefix}">
                    If you didn't request this change, please
                </span>
            <a th:href="${mailtoLink}" class="text-link"
               th:text="#{email.password.reset.unauthorized.link}">
                contact our support team immediately.
            </a>
        </div>
    </div>

    <!-- Footer -->
    <div class="footer-content">
        <div th:replace="~{fragments/footer :: footer}"></div>
    </div>
</div>
</body>
</html>
